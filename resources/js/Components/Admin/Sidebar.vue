<script setup>
import logo from '@src/images/logo.gif'
import SidebarLink from './SidebarLink.vue'
import SidebarDropdownLink from './SidebarDropdownLink.vue'
import { Link } from '@inertiajs/inertia-vue3';
import { ref } from 'vue'

const windowWidth = ref(window.innerWidth);

const props = defineProps({
    openSidebar: Boolean,
});

const emit = defineEmits(["closeSidebar"]);

function closeSidebar() {
    emit("closeSidebar");
}

const openedMenu = ref('')

function openMenu(menu) {
    openedMenu.value == menu ? openedMenu.value = '' : openedMenu.value = menu
}
</script>

<template>
    <nav
        @click="closeSidebar"
        class="fixed z-50"
        :class="{
            'inset-0 bg-black bg-opacity-30 z-50': openSidebar && windowWidth < 1024,
        }"
    >
        <Transition
            enter-from-class="-translate-x-64"
            enter-active-class="transition ease-in-out duration-300"
            enter-to-class="translate-x-0"
            leave-from-class="translate-x-0"
            leave-active-class="transition ease-in-out duration-300"
            leave-to-class="-translate-x-64"
        >
            <div
                v-if="openSidebar"
                class="bg-white w-64 h-screen shadow-sidebar overflow-y-auto z-50"
                @click.stop
            >
                <div class="sticky top-0 bg-white">
                    <div class="flex items-center space-x-5 px-5 py-3.5">
                        <div>
                            <img src="https://labelin.co/storage/img/setting_web/t9ebqSFalSmrWatWVjMNRomoFxa5KfJg9AYurwSE.png" alt="Logo" class="lg:w-48">
                        </div>
                        <button @click="closeSidebar" class="lg:hidden bg-dashboard flex-none flex items-center justify-center w-10 h-10 rounded-lg focus:outline-none">
                            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" class="text-purple-1100 w-6 h-6">
                                <path stroke-linecap="round" stroke-linejoin="round" d="M15.75 19.5L8.25 12l7.5-7.5" />
                            </svg>
                        </button>
                    </div>
                </div>
                <div class="py-3 pr-4">
                    <ul>
                        <SidebarLink name="Dashboard" href="/panel/dashboard" :active="$page.url === '/panel/dashboard'">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M2.25 12l8.954-8.955c.44-.439 1.152-.439 1.591 0L21.75 12M4.5 9.75v10.125c0 .621.504 1.125 1.125 1.125H9.75v-4.875c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125V21h4.125c.621 0 1.125-.504 1.125-1.125V9.75M8.25 21h8.25" />
                        </SidebarLink>
                        <SidebarLink name="Partner" href="/panel/partner" :active="$page.url === '/panel/partner'">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M8.25 21v-4.875c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125V21m0 0h4.5V3.545M12.75 21h7.5V10.75M2.25 21h1.5m18 0h-18M2.25 9l4.5-1.636M18.75 3l-1.5.545m0 6.205l3 1m1.5.5l-1.5-.5M6.75 7.364V3h-3v18m3-13.636l10.5-3.819" />
                        </SidebarLink>
                        <SidebarLink name="Partner Produk" href="/panel/partner_product" :active="$page.url === '/panel/partner_product'">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M21 7.5l-9-5.25L3 7.5m18 0l-9 5.25m9-5.25v9l-9 5.25M3 7.5l9 5.25M3 7.5v9l9 5.25m0-9v9" />
                        </SidebarLink>
                        <SidebarLink name="Request QR" href="/panel/request_qrcode" :active="$page.url === '/panel/request_qrcode'">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M3.75 4.875c0-.621.504-1.125 1.125-1.125h4.5c.621 0 1.125.504 1.125 1.125v4.5c0 .621-.504 1.125-1.125 1.125h-4.5A1.125 1.125 0 013.75 9.375v-4.5zM3.75 14.625c0-.621.504-1.125 1.125-1.125h4.5c.621 0 1.125.504 1.125 1.125v4.5c0 .621-.504 1.125-1.125 1.125h-4.5a1.125 1.125 0 01-1.125-1.125v-4.5zM13.5 4.875c0-.621.504-1.125 1.125-1.125h4.5c.621 0 1.125.504 1.125 1.125v4.5c0 .621-.504 1.125-1.125 1.125h-4.5A1.125 1.125 0 0113.5 9.375v-4.5z" />
                            <path stroke-linecap="round" stroke-linejoin="round" d="M6.75 6.75h.75v.75h-.75v-.75zM6.75 16.5h.75v.75h-.75v-.75zM16.5 6.75h.75v.75h-.75v-.75zM13.5 13.5h.75v.75h-.75v-.75zM13.5 19.5h.75v.75h-.75v-.75zM19.5 13.5h.75v.75h-.75v-.75zM19.5 19.5h.75v.75h-.75v-.75zM16.5 16.5h.75v.75h-.75v-.75z" />
                        </SidebarLink>
                        <SidebarLink name="Customer Data" href="/panel/customer_data" :active="$page.url === '/panel/customer_data'">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M6.429 9.75L2.25 12l4.179 2.25m0-4.5l5.571 3 5.571-3m-11.142 0L2.25 7.5 12 2.25l9.75 5.25-4.179 2.25m0 0L21.75 12l-4.179 2.25m0 0l4.179 2.25L12 21.75 2.25 16.5l4.179-2.25m11.142 0l-5.571 3-5.571-3" />
                        </SidebarLink>
                        <SidebarLink name="Kontak" href="/panel/contact" :active="$page.url === '/panel/contact'">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M9 12h3.75M9 15h3.75M9 18h3.75m3 .75H18a2.25 2.25 0 002.25-2.25V6.108c0-1.135-.845-2.098-1.976-2.192a48.424 48.424 0 00-1.123-.08m-5.801 0c-.065.21-.1.433-.1.664 0 .414.336.75.75.75h4.5a.75.75 0 00.75-.75 2.25 2.25 0 00-.1-.664m-5.8 0A2.251 2.251 0 0113.5 2.25H15c1.012 0 1.867.668 2.15 1.586m-5.8 0c-.376.023-.75.05-1.124.08C9.095 4.01 8.25 4.973 8.25 6.108V8.25m0 0H4.875c-.621 0-1.125.504-1.125 1.125v11.25c0 .621.504 1.125 1.125 1.125h9.75c.621 0 1.125-.504 1.125-1.125V9.375c0-.621-.504-1.125-1.125-1.125H8.25zM6.75 12h.008v.008H6.75V12zm0 3h.008v.008H6.75V15zm0 3h.008v.008H6.75V18z" />
                        </SidebarLink>
                        <SidebarLink name="Report" href="/panel/report" :active="$page.url === '/panel/report'">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M12 12.75c1.148 0 2.278.08 3.383.237 1.037.146 1.866.966 1.866 2.013 0 3.728-2.35 6.75-5.25 6.75S6.75 18.728 6.75 15c0-1.046.83-1.867 1.866-2.013A24.204 24.204 0 0112 12.75zm0 0c2.883 0 5.647.508 8.207 1.44a23.91 23.91 0 01-1.152 6.06M12 12.75c-2.883 0-5.647.508-8.208 1.44.125 2.104.52 4.136 1.153 6.06M12 12.75a2.25 2.25 0 002.248-2.354M12 12.75a2.25 2.25 0 01-2.248-2.354M12 8.25c.995 0 1.971-.08 2.922-.236.403-.066.74-.358.795-.762a3.778 3.778 0 00-.399-2.25M12 8.25c-.995 0-1.97-.08-2.922-.236-.402-.066-.74-.358-.795-.762a3.734 3.734 0 01.4-2.253M12 8.25a2.25 2.25 0 00-2.248 2.146M12 8.25a2.25 2.25 0 012.248 2.146M8.683 5a6.032 6.032 0 01-1.155-1.002c.07-.63.27-1.222.574-1.747m.581 2.749A3.75 3.75 0 0115.318 5m0 0c.427-.283.815-.62 1.155-.999a4.471 4.471 0 00-.575-1.752M4.921 6a24.048 24.048 0 00-.392 3.314c1.668.546 3.416.914 5.223 1.082M19.08 6c.205 1.08.337 2.187.392 3.314a23.882 23.882 0 01-5.223 1.082" />
                        </SidebarLink>
                        <SidebarDropdownLink href="#" name="Master Data" :openedMenu="openedMenu" :active="$page.url.startsWith('/admin/master-data')" @handleOpenMenu="openMenu('Master Data')">
                            <template #icon>
                                <path stroke-linecap="round" stroke-linejoin="round" d="M20.25 6.375c0 2.278-3.694 4.125-8.25 4.125S3.75 8.653 3.75 6.375m16.5 0c0-2.278-3.694-4.125-8.25-4.125S3.75 4.097 3.75 6.375m16.5 0v11.25c0 2.278-3.694 4.125-8.25 4.125s-8.25-1.847-8.25-4.125V6.375m16.5 0v3.75m-16.5-3.75v3.75m16.5 0v3.75C20.25 16.153 16.556 18 12 18s-8.25-1.847-8.25-4.125v-3.75m16.5 0c0 2.278-3.694 4.125-8.25 4.125s-8.25-1.847-8.25-4.125" />
                            </template>

                            <Link href="/panel/category">
                                <li class="hover:text-purple-1100 py-2" :class="{ 'text-purple-1100': $page.url === '/panel/category' }">Kategori Produk</li>
                            </Link>
                            <Link href="/panel/type_qrcode">
                                <li class="hover:text-purple-1100 py-2" :class="{ 'text-purple-1100': $page.url === '/panel/type_qrcode' }">Type QR</li>
                            </Link>
                        </SidebarDropdownLink>
                        <SidebarDropdownLink href="#" name="Utilities" :openedMenu="openedMenu" :active="$page.url.startsWith('/admin/utilities')" @handleOpenMenu="openMenu('Utilities')">
                            <template #icon>
                                <path stroke-linecap="round" stroke-linejoin="round" d="M9.594 3.94c.09-.542.56-.94 1.11-.94h2.593c.55 0 1.02.398 1.11.94l.213 1.281c.063.374.313.686.645.87.074.04.147.083.22.127.324.196.72.257 1.075.124l1.217-.456a1.125 1.125 0 011.37.49l1.296 2.247a1.125 1.125 0 01-.26 1.431l-1.003.827c-.293.24-.438.613-.431.992a6.759 6.759 0 010 .255c-.007.378.138.75.43.99l1.005.828c.424.35.534.954.26 1.43l-1.298 2.247a1.125 1.125 0 01-1.369.491l-1.217-.456c-.355-.133-.75-.072-1.076.124a6.57 6.57 0 01-.22.128c-.331.183-.581.495-.644.869l-.213 1.28c-.09.543-.56.941-1.11.941h-2.594c-.55 0-1.02-.398-1.11-.94l-.213-1.281c-.062-.374-.312-.686-.644-.87a6.52 6.52 0 01-.22-.127c-.325-.196-.72-.257-1.076-.124l-1.217.456a1.125 1.125 0 01-1.369-.49l-1.297-2.247a1.125 1.125 0 01.26-1.431l1.004-.827c.292-.24.437-.613.43-.992a6.932 6.932 0 010-.255c.007-.378-.138-.75-.43-.99l-1.004-.828a1.125 1.125 0 01-.26-1.43l1.297-2.247a1.125 1.125 0 011.37-.491l1.216.456c.356.133.751.072 1.076-.124.072-.044.146-.087.22-.128.332-.183.582-.495.644-.869l.214-1.281z" />
                                <path stroke-linecap="round" stroke-linejoin="round" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" />
                            </template>

                            <!-- <Link href="/panel/users">
                                <li class="hover:text-purple-1100 py-2" :class="{ 'text-purple-1100': $page.url === '/panel/users' }">User</li>
                            </Link>
                            <Link href="/panel/roles">
                                <li class="hover:text-purple-1100 py-2" :class="{ 'text-purple-1100': $page.url === '/panel/roles' }">Role</li>
                            </Link> -->
                            <Link href="/panel/setting_web">
                                <li class="hover:text-purple-1100 py-2" :class="{ 'text-purple-1100': $page.url === '/panel/setting_web' }">Setting</li>
                            </Link>
                        </SidebarDropdownLink>
                    </ul>
                </div>
            </div>
        </Transition>
    </nav>
</template>

<style scoped>
.shadow-sidebar {
    box-shadow: 0px 0px 25px 0px rgb(45 69 95 / 10%);
}
</style>
